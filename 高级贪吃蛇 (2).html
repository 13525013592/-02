<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snake Game</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        canvas { border: 1px solid #000; }
        #controls { margin-top: 20px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin: 5px; }
        select { margin: 5px; padding: 5px; font-size: 16px; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <div id="controls">
        <button onclick="startGame()">Start Game</button>
        <button onclick="stopGame()">Stop Game</button>
        <label for="speedSelect">Speed:</label>
        <select id="speedSelect">
            <option value="1">Slow</option>
            <option value="2">Medium</option>
            <option value="3">Fast</option>
        </select>
    </div>
    <audio id="gameMusic" src="game_music.mp3" loop></audio>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let snake = [];
        let food = {};
        let direction = 'RIGHT';
        let speed = 2;
        let score = 0;
        canvas.width = window.innerWidth * 0.8;
        canvas.height = window.innerHeight * 0.8;
        function drawGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawSnake();
            drawFood();
            if (checkCollision()) {
                gameOver();
            }
            setTimeout(drawGame, 1000 / speed);
        }
        function drawSnake() {
            for (let i = 0; i < snake.length; i++) {
                ctx.fillStyle = (i === 0 ? 'green' : 'rgba(0, 255, 0, 0.5)');
                ctx.fillRect(snake[i][0] * 20, snake[i][1] * 20, 20, 20);
            }
        }
        function drawFood() {
            ctx.fillStyle = 'red';
            ctx.fillRect(food.x * 20, food.y * 20, 20, 20);
        }
        function checkCollision() {
            for (let i = 0; i < snake.length; i++) {
                if (snake[i][0] === food.x && snake[i][1] === food.y) {
                    return false;
                }
            }
            for (let i = 0; i < snake.length; i++) {
                for (let j = i + 1; j < snake.length; j++) {
                    if (snake[i][0] === snake[j][0] && snake[i][1] === snake[j][1]) {
                        return true;
                    }
                }
            }
            return snake[0][0] === -20 || snake[0][1] === -20 ||
                snake[0][0] === canvas.width || snake[0][1] === canvas.height;
        }
        function gameOver() {
            ctx.fillStyle = 'black';
            ctx.font = '30px Arial';
            ctx.fillText("Game Over", canvas.width / 2 - 100, canvas.height / 2 + 20);
            document.getElementById('gameMusic').pause();
        }
        function startGame() {
            snake = [[8, 10], [6, 10], [4, 10], [2, 10]];
            food = {
                x: Math.floor(Math.random() * canvas.width / 20) * 20,
                y: Math.floor(Math.random() * canvas.height / 20) * 20
            };
            direction = 'RIGHT';
            score = 0;
            drawGame();
            document.getElementById('gameMusic').play();
        }
        function stopGame() {
            clearInterval(gameInterval);
            document.getElementById('gameMusic').pause();
        }
        const gameInterval = setInterval(drawGame, 1000 / speed);
        document.getElementById('controls').style.display = 'block';
        startGame();
        document.getElementById('speedSelect').addEventListener('change', function(e) {
            speed = parseInt(e.target.value);
            clearInterval(gameInterval);
            gameInterval = setInterval(drawGame, 1000 / speed);
        });
    </script>
</body>
</html>